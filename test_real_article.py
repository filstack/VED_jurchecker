#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–¢–µ—Å—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ç–µ–∫—Å—Ç–µ —Å—Ç–∞—Ç—å–∏
"""

import sys
sys.stdout.reconfigure(encoding='utf-8')

from jur_checker import JurChecker
import logging

logging.basicConfig(level=logging.ERROR)

print("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è JurChecker...")
jc = JurChecker('registry_entities_rows.csv')

# –†–µ–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏
text = """–í –ö–∏–µ–≤–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –º—É–∂—á–∏–Ω–∞ –æ–∫–æ–ª–æ 9:00 –º—Å–∫ 10 –∏—é–ª—è –∑–∞—Å—Ç—Ä–µ–ª–∏–ª –ø–æ–ª–∫–æ–≤–Ω–∏–∫–∞ –°–ª—É–∂–±—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –£–∫—Ä–∞–∏–Ω—ã (–°–ë–£) –ò–≤–∞–Ω–∞ –í–æ—Ä–æ–Ω–∏—á–∞. –û–± —ç—Ç–æ–º —Å–æ–æ–±—â–∏–ª –±—ã–≤—à–∏–π –¥–µ–ø—É—Ç–∞—Ç –í–µ—Ä—Ö–æ–≤–Ω–æ–π —Ä–∞–¥—ã –ò–≥–æ—Ä—å –ú–æ—Å–∏–π—á—É–∫ –≤ —Å–≤–æ–µ–º Telegram-–∫–∞–Ω–∞–ª–µ.

–ü–æ –µ–≥–æ –¥–∞–Ω–Ω—ã–º, –≤ –í–æ—Ä–æ–Ω–∏—á–∞ –≤—ã—Å—Ç—Ä–µ–ª–∏–ª–∏ –ø—è—Ç—å —Ä–∞–∑, –ø–æ—Å–ª–µ —á–µ–≥–æ –Ω–∞–ø–∞–¥–∞–≤—à–∏–π —Å–∫—Ä—ã–ª—Å—è —Å –º–µ—Å—Ç–∞ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è. –û—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Ä–∞–Ω–µ–Ω–∏–π –ø–æ–ª–∫–æ–≤–Ω–∏–∫ –°–ë–£ —Å–∫–æ–Ω—á–∞–ª—Å—è –Ω–∞ –º–µ—Å—Ç–µ.

–°–µ–π—á–∞—Å —Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ-–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞ –æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –º–µ—Å—Ç–æ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è. –í–µ–¥–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –ª–∏—á–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–µ–ª—è–≤—à–µ–≥–æ.

–í–æ—Ä–æ–Ω–∏—á —Å –Ω–æ—è–±—Ä—è 2024 –≥. –∑–∞–Ω—è–ª –¥–æ–ª–∂–Ω–æ—Å—Ç—å —Å—Ç–∞—Ä—à–µ–≥–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏–∫–∞ 1-–≥–æ –æ—Ç–¥–µ–ª–∞ 16-–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¶–µ–Ω—Ç—Ä–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –û–Ω –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–µ–Ω –∑–∞ —Ä—è–¥ –¥–∏–≤–µ—Ä—Å–∏–π –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏.

14 –º–∞—Ä—Ç–∞ –≤ –û–¥–µ—Å—Å–µ —É–±–∏–ª–∏ –±—ã–≤—à–µ–≥–æ –≥–ª–∞–≤—É —Å–∏–ª–æ–≤–æ–≥–æ –±–ª–æ–∫–∞ –æ–¥–µ—Å—Å–∫–æ–π —è—á–µ–π–∫–∏ ¬´–ü—Ä–∞–≤–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞¬ª –∞–∫—Ç–∏–≤–∏—Å—Ç–∞ –î–µ–º—å—è–Ω–∞ –ì–∞–Ω—É–ª–∞. –¢–∞–∫–∂–µ –æ–Ω –±—ã–ª –ª–∏–¥–µ—Ä–æ–º –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã ¬´–£–ª–∏—á–Ω—ã–π —Ñ—Ä–æ–Ω—Ç¬ª. –ì–∞–Ω—É–ª —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è—Ö 2 –º–∞—è 2014 –≥., –∑–∞–∫–æ–Ω—á–∏–≤—à–∏—Ö—Å—è –ø–æ–∂–∞—Ä–æ–º –≤ –æ–¥–µ—Å—Å–∫–æ–º –î–æ–º–µ –ø—Ä–æ—Ñ—Å–æ—é–∑–æ–≤. –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –¥–µ–ª –£–∫—Ä–∞–∏–Ω—ã –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å —Å–æ–æ–±—â–∏–ª–æ –æ –∑–∞–¥–µ—Ä–∂–∞–Ω–∏–∏ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º–æ–≥–æ –≤ –µ–≥–æ —É–±–∏–π—Å—Ç–≤–µ."""

print("\n" + "="*100)
print("–¢–ï–°–¢–û–í–´–ô –¢–ï–ö–°–¢:")
print("="*100)
print(text)
print("="*100)

print("\nüîç –ü–æ–∏—Å–∫ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π...\n")

results = jc.find_raw_candidates(text)

if not results:
    print("‚úÖ –£–ø–æ–º–∏–Ω–∞–Ω–∏–π –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ù–ï –û–ë–ù–ê–†–£–ñ–ï–ù–û")
else:
    print(f"‚ö†Ô∏è  –û–ë–ù–ê–†–£–ñ–ï–ù–û {len(results)} —É–ø–æ–º–∏–Ω–∞–Ω–∏–π:\n")

    for i, result in enumerate(results, 1):
        entity_name = result['entity_name']
        entity_type = result['entity_type']
        found_alias = result['found_alias']
        context = result['context']

        print(f"[{i}] {entity_name}")
        print(f"    –¢–∏–ø: {entity_type}")
        print(f"    –ù–∞–π–¥–µ–Ω–æ –∫–∞–∫: '{found_alias}'")
        print(f"    –ö–æ–Ω—Ç–µ–∫—Å—Ç: ...{context}...")
        print()

print("="*100)
print("\nüìù –í–´–í–û–î:")

if results:
    print(f"""
–¢–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ(—è) –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π/–ª–∏—Ü.
–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –º–∞—Ä–∫–∏—Ä–æ–≤–∫—É —Å–æ–≥–ª–∞—Å–Ω–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –†–§.

–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:
""")
    for result in results:
        entity_name = result['entity_name']
        entity_type = result['entity_type']
        print(f"  - {entity_name} ({entity_type})")

    print("""
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞:
  - –î–ª—è —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç–æ–≤: "–ø—Ä–∏–∑–Ω–∞–Ω–∞ —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–æ–π –∏ –∑–∞–ø—Ä–µ—â–µ–Ω–∞ –≤ –†–§"
  - –î–ª—è —Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–æ–≤: "–ø—Ä–∏–∑–Ω–∞–Ω–∞ —Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π –∏ –∑–∞–ø—Ä–µ—â–µ–Ω–∞ –≤ –†–§"
  - –î–ª—è –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤: "–ø—Ä–∏–∑–Ω–∞–Ω–∞ –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–º –≤ –†–§"
""")
else:
    print("\n–¢–µ–∫—Å—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π/–ª–∏—Ü.")
    print("–ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è.")

print("="*100)
