# JurChecker - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–∑ —Ä–µ–µ—Å—Ç—Ä–æ–≤ –†–§

API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –ª–∏—Ü –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –∏–∑ —Ä–µ–µ—Å—Ç—Ä–æ–≤ –†–§ (–∏–Ω–æ–∞–≥–µ–Ω—Ç—ã, —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—ã, –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–ª–∏–∞—Å–æ–≤** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç ~40 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∏–º–µ–Ω–∏
- üìù **–ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—è** - –Ω–∞—Ö–æ–¥–∏—Ç –ø–∞–¥–µ–∂–∏ (–ù–∞–≤–∞–ª—å–Ω—ã–π ‚Üí –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ, –ù–∞–≤–∞–ª—å–Ω–æ–º—É)
- üî§ **–ò–Ω–∏—Ü–∏–∞–ª—ã** - —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –ê. –ù–∞–≤–∞–ª—å–Ω—ã–π, –ê.–ê. –ù–∞–≤–∞–ª—å–Ω—ã–π
- üåê **–¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è** - –Ω–∞—Ö–æ–¥–∏—Ç –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã (Navalny)
- ‚ö° **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** - Aho-Corasick –∞–≤—Ç–æ–º–∞—Ç —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- üéØ **–£–º–µ–Ω—å—à–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞** - –ê–ª–µ–∫—Å–∞–Ω–¥—Ä ‚Üí –°–∞—à–∞, –ê–ª–µ–∫—Å–µ–π ‚Üí –õ—ë—à–∞

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/your-username/jurchecker.git
cd jurchecker

# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.10 -m venv .venv
source .venv/bin/activate  # Linux/Mac
# –∏–ª–∏ .venv\Scripts\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ FastAPI —Å–µ—Ä–≤–µ—Ä
uvicorn main:app --host 0.0.0.0 --port 8000

# –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
# http://localhost:8000
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—Å—Ç–∞:**

```bash
curl -X POST "http://localhost:8000/check-candidates" \
  -H "Content-Type: application/json" \
  -d '{"text": "–î–µ–ª–æ –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ –≤ —Å—É–¥–µ"}'
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "candidates": [
    {
      "entity_id": "...",
      "entity_name": "–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –®—Ç–∞–±—ã –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ",
      "entity_type": "—ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—ã",
      "found_alias": "–Ω–∞–≤–∞–ª—å–Ω–æ–≥–æ",
      "context": "–î–µ–ª–æ –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ –≤ —Å—É–¥–µ"
    }
  ]
}
```

### Health Check

```bash
curl http://localhost:8000/health
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
jurchecker/
‚îú‚îÄ‚îÄ main.py                          # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ jur_checker.py                   # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ + AliasExpander
‚îú‚îÄ‚îÄ search.py                        # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ registry_entities_rows.csv       # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ tests/                           # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ contract/                    # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –º–µ—Ç–æ–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ integration/                 # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ specs/                           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

## –§–æ—Ä–º–∞—Ç CSV

–§–∞–π–ª `registry_entities_rows.csv` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

```csv
id,name,type,required_markup,markup_phrase,legal_basis,done
uuid-1,–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á,–∏–Ω–æ–∞–≥–µ–Ω—Ç—ã,true,–≤–Ω–µ—Å—ë–Ω –≤ —Ä–µ–µ—Å—Ç—Ä...,—á. 2.1 —Å—Ç. 13.15,true
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏:**
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `name` - –ø–æ–ª–Ω–æ–µ –∏–º—è —Å—É—â–Ω–æ—Å—Ç–∏
- `type` - —Ç–∏–ø (–∏–Ω–æ–∞–≥–µ–Ω—Ç—ã, —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—ã, –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ)

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–ª–∏–∞—Å–æ–≤

–î–ª—è –∏–º–µ–Ω–∏ **"–ê–ª–µ–∫—Å–µ–π –ù–∞–≤–∞–ª—å–Ω—ã–π"** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è:

**–ü–æ—Ä—è–¥–∫–∏ –∏–º–µ–Ω–∏:**
- –ê–ª–µ–∫—Å–µ–π –ù–∞–≤–∞–ª—å–Ω—ã–π
- –ù–∞–≤–∞–ª—å–Ω—ã–π –ê–ª–µ–∫—Å–µ–π

**–ò–Ω–∏—Ü–∏–∞–ª—ã:**
- –ê. –ù–∞–≤–∞–ª—å–Ω—ã–π
- –ù–∞–≤–∞–ª—å–Ω—ã–π –ê.

**–ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—è (–ø–∞–¥–µ–∂–∏):**
- –Ω–∞–≤–∞–ª—å–Ω–æ–≥–æ, –Ω–∞–≤–∞–ª—å–Ω–æ–º—É, –Ω–∞–≤–∞–ª—å–Ω—ã–º, –Ω–∞–≤–∞–ª—å–Ω–æ–º

**–¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è:**
- navalny, a. navalny, aleksey navalny

**–£–º–µ–Ω—å—à–∏—Ç–µ–ª—å–Ω—ã–µ:**
- –ª—ë—à–∞, –ª–µ—à–∞, –∞–ª–µ–∫—Å

**–ò—Ç–æ–≥–æ:** ~40-70 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–µ –∏–º—è!

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:** ~1-2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è 1000 —Å—É—â–Ω–æ—Å—Ç–µ–π
- **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏:** <1 —Å–µ–∫—É–Ω–¥–∞ (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞)
- **–ö—ç—à:** `.cache/registry_entities_rows_automaton.pkl`
- **–ü–æ–∏—Å–∫:** <100–º—Å –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

## –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### Systemd —Å–µ—Ä–≤–∏—Å

–°–æ–∑–¥–∞–π—Ç–µ `/etc/systemd/system/jurchecker.service`:

```ini
[Unit]
Description=JurChecker API Service
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/opt/jurchecker
Environment="PATH=/opt/jurchecker/.venv/bin"
ExecStart=/opt/jurchecker/.venv/bin/uvicorn main:app --host 0.0.0.0 --port 8001
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
sudo systemctl daemon-reload
sudo systemctl enable jurchecker
sudo systemctl start jurchecker
sudo systemctl status jurchecker
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Ç–µ—Å—Ç—ã
pytest tests/ -v

# –¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/contract/ -v

# –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/integration/ -v
```

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 37/37 —Ç–µ—Å—Ç–æ–≤ ‚úÖ

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.10+**
- **FastAPI** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **pymorphy3** - –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
- **petrovich** - —Ä—É—Å—Å–∫–∏–µ —É–º–µ–Ω—å—à–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞
- **transliterate** - —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
- **pyahocorasick** - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ–¥—Å—Ç—Ä–æ–∫

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ê–≤—Ç–æ—Ä

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏–∑ —Ä–µ–µ—Å—Ç—Ä–æ–≤ –†–§.
